================================================================================
|                                                                              |
|                  Brugervejledning for In-Circuit ESR-meter                   |
|                                                                              |
================================================================================
| DOKUMENT ID:  UGUI-ESR-MIL-001                                               |
| DATO:         19-01-25                                                       |
| VERSION:      1.00                                                           |
| SYSTEM:       INCIRCUIT ESR METER                                            |
| FORFATTER:    Jan Engelbrecht Pedersen                                       |
================================================================================

¬ß1. Pr√¶cis sammenfatning
================================================================================
Denne brugervejledning beskriver korrekt anvendelse, kalibrering og vedligehold-
else af ESR-meteret baseret p√• kravspecifikation SRS-ESR-MIL-001. Systemet m√•ler
ESR (Equivalent Series Resistance) i elektrolytkondensatorer i omr√•det 0-10 Œ©
med 1 mŒ© opl√∏sning ved 100 kHz testsignal med maksimalt 0,1V amplitude for
sikker in-circuit operation. Vejledningen d√¶kker alle brugertyper fra hobbybrug
til professionel service og forskning.
--------------------------------------------------------------------------------

¬ß2. Definitioner og pr√¶cisering
================================================================================
2.1 N√∏glebegreber
ESR (H.ESR.001): Effektiv serie-modstand i elektrolytkondensator ved 100 kHz
frekvens. M√•leenhed: ohm (Œ©), milliohm (mŒ©).

In-circuit m√•ling (H.MET.001): M√•ling udf√∏rt uden afsondring fra kredsl√∏b med
‚â§0,1V testsignal for at undg√• halvlederaktivering.

Kelvin-m√•ling: Fire-leder m√•leteknik der eliminerer fejl fra lednings- og
kontaktmodstand.
--------------------------------------------------------------------------------
2.2 Sikkerhedssymboler
‚ö†Ô∏è ADVARSEL: F√∏lg sikkerhedsanvisninger for at undg√• personskade eller skade p√•
udstyr.

‚ö° ELSIKERHED: Altid sluk for str√∏mmen til testet kredsl√∏b f√∏r m√•ling.

üì° EMI/ESD: Instrumentet indeholder ESD-f√∏lsomme komponenter. H√•ndter korrekt.
--------------------------------------------------------------------------------

¬ß3. Systemoversigt og hurtigstart
================================================================================
3.1 Pakkeindhold og komponenter
Standardpakke indeholder:
‚Ä¢ ESR-meter hovedenhed (100√ó150√ó50 mm ABS kabinet)
‚Ä¢ 4√ó isolerede kelvin-prober med spidse tip (farvekodet)
‚Ä¢ USB-C str√∏mkabel
‚Ä¢ Kalibreringscertifikat (kun ved fuld kalibrering)
‚Ä¢ Denne brugervejledning
--------------------------------------------------------------------------------
3.2 Hurtigstart - f√∏rstegangsbrug
Trin 1: Str√∏mforbindelse
Tilslut USB-C kabel til instrumentets USB-C port og 5V USB str√∏mforsyning/-
computer. Den interne str√∏mforsyning initialiseres automatisk.

Trin 2: Systemopstart
Systemet starter automatisk ved str√∏mtilslutning.
LCD display viser startsekvens:
ESR-Meter v1.00
Initialiserer...
Efter 2-3 sekunder: ESR-Meter Ready

Trin 3: Probeforbindelse
Tilslut de fire kelvin-prober til de fire gulvst√•ende sockets p√• frontpanelet:
‚Ä¢ R√∏d (Force High): HF
‚Ä¢ Gul (Sense High): HS
‚Ä¢ Gr√∏n (Sense Low): LS
‚Ä¢ Sort (Force Low): LF

Trin 4: DUT-forbindelse (Device Under Test)
Forbered kondensatoren eller kredsl√∏b til test:
‚Ä¢ Sluk ALTID str√∏mmen til testet kredsl√∏b f√∏rst
‚Ä¢ Aflad kondensatorer fuldst√¶ndigt
‚Ä¢ Forbind kelvin-proberne:
  - HF og HS til kondensatorens positive ben
  - LF og LS til kondensatorens negative ben

Trin 5: M√•ling
Tryk ingen knapper - systemet m√•ler automatisk hvert 100. millisekund.
Resultat vises p√• LCD:
ESR: 1.234 mŒ©
ADC: 1234 PGA:2x
--------------------------------------------------------------------------------

¬ß4. Detaljeret operationsvejledning
================================================================================
4.1 Display og brugergr√¶nseflade
4.1.1 LCD Display Layout
Linje 1: [ESR: 1.234 mŒ©       ]
Linje 2: [ADC: 1234 PGA:2x    ]
Varianter:
‚Ä¢ ESR-visning: 1.234 mŒ©, 0.456 Œ©, 123.4 nŒ© (automatisk skalering)
‚Ä¢ R√• ADC-visning (ved skift med knap 1): ADC: 1234 PGA:2x (37.6%)
--------------------------------------------------------------------------------
4.1.2 Statusindikatorer
‚Ä¢ PGA: Viser aktiv forst√¶rkning (2x, 4x, 8x, 16x) - automatisk justering
‚Ä¢ ADC: R√• 16-bit v√¶rdi efter 64√ó oversampling (kun til debugging)
--------------------------------------------------------------------------------
4.2 Knapfunktioner
Knap 1 (venstre): Skift mellem displaytilstande
Kort tryk (<1s): Skifter mellem:
‚Ä¢ ESR_RESULT: Viser beregnet ESR-v√¶rdi (normaltilstand)
‚Ä¢ RAW_ADC: Viser r√• ADC-v√¶rdi og PGA (til kalibrering)

Knap 2 (h√∏jre): Skift kommunikationstilstand
Kort tryk (<1s): Skifter mellem:
‚Ä¢ NORMAL: Viser kun p√• LCD (ingen seriel output)
‚Ä¢ SCPI: Aktiverer SCPI-protokol over seriel USB

Langt tryk (begge knapper >3s): N√∏dgenstart/systemreset
--------------------------------------------------------------------------------
4.3 M√•leprocedurer
4.3.1 Standard kondensatorm√•ling
‚Ä¢ Kontroller at kondensatoren er fuldt afladet (m√•lt sp√¶nding <0,1V)
‚Ä¢ Forbind kelvin-proberne korrekt (se ¬ß3.2)
‚Ä¢ Vent 2-3 sekunder for stabilisering
‚Ä¢ Afmeldt ESR-v√¶rdi med opl√∏sning ned til 1 mŒ©
--------------------------------------------------------------------------------
4.3.2 In-circuit m√•ling
‚Ä¢ KRITISK: Sluk str√∏mmen til hele kredsl√∏bet
‚Ä¢ Identificer kondensatorens position p√• PCB
‚Ä¢ Forbind probene direkte til kondensatorens ben/loddepunkter
‚Ä¢ Tjek for parallelle impedanser som kan p√•virke m√•lingen
‚Ä¢ Not√©r eventuelt at lave ESR-v√¶rdier kan v√¶re maskerede af parallelle
  komponenter

Tydning af ESR v√¶rdi:
Typiske Max ESR-v√¶rdier (Ohm)
Kapacitet (¬µF)	10V	15V/16V	20V/25V	35V/40V	50V	60V/63V	100V
10 ¬µF		5,0	4,0	3,5	3,0	2,5	2,2	2,0
22 ¬µF		2,5	2,2	2,0	1,5	1,2	1,1	1,0
47 ¬µF		1,3	1,2	1,0	0,8	0,7	0,6	0,5
100 ¬µF		0,6	0,5	0,4	0,3	0,3	0,2	0,2
220 ¬µF		0,3	0,2	0,2	0,15	0,14	0,12	0,1
470 ¬µF		0,15	0,14	0,12	0,1	0,09	0,08	0,07
1.000 ¬µF	0,08	0,07	0,06	0,05	0,05	0,04	0,04
2.200 ¬µF	0,05	0,04	0,04	0,03	0,03	0,02	0,02
4.700 ¬µF	0,03	0,02	0,02	0,02	0,01	0,01	0,01
10.000 ¬µF	0,02	0,02	0,01	0,01	0,01	0,01	<0,01
22.000 ¬µF	0,01	0,01	0,01	<0,01	<0,01	<0,01	<0,01
40.000 ¬µF	<0,01	<0,01	<0,01	<0,01	<0,01	<0,01	<0,01

Vigtige bem√¶rkninger til afl√¶sning:

Low-ESR typer: Moderne "Low-ESR" kondensatorer 
(is√¶r dem til switch-mode str√∏mforsyninger) vil ofte have v√¶rdier, 
der er 3-10 gange lavere end tabellen herover.

Kritisk fejlt√¶rskel: Erfarne teknikere p√•peger, at man sj√¶ldent skal kassere en komponent 
baseret p√• tabellen alene, medmindre v√¶rdien er 2-3 gange h√∏jere end skemaet viser.
Det afh√¶nger dog af applikationen om den kan bruges (Switch Mode PSU er
kr√¶vende!)

Low-ESR Advarsel: Mange online guides understreger, at for Switch Mode Power Supplies 
(SMPS), b√∏r du forvente v√¶rdier, der er markant lavere end tabbelen 
(ofte helt ned til 0,02Œ© for en 470¬µF kondensator). 

Temperatur: ESR stiger kraftigt ved lave temperaturer og falder ved h√∏je 
temperaturer.

In-circuit: Ved m√•ling direkte p√• printkortet kan parallelle komponenter 
f√• ESR-v√¶rdien til at fremst√• lavere, end den reelt er. 
--------------------------------------------------------------------------------
4.3.3 Referencetest og validering
‚Ä¢ Ved mistanke om instrumentfejl: Test med kendte pr√¶cisionsmodstande (1 Œ©,
  5 Œ©, 10 Œ©)
‚Ä¢ Sammenlign med multimeter i modstandstilstand ved lav frekvens
--------------------------------------------------------------------------------
4.4 Seriel kommunikation (SCPI)
4.4.1 Ops√¶tning
‚Ä¢ Tilslut USB-C til computer
‚Ä¢ Tryk knap 2 for at skifte til SCPI tilstand
‚Ä¢ √Öbn seriel terminal (115200 baud, 8N1)
‚Ä¢ Instrumentet responderer nu p√• SCPI-kommandoer
--------------------------------------------------------------------------------
4.4.2 Basis SCPI-kommandoer
*IDN?                     // Enhedsidentifikation
MEASure:ESR?              // Udf√∏r enkeltm√•ling og returner ESR
SYSTem:PRESet             // Nulstil system til fabriksindstillinger
DISPlay:MODE RAW          // Skift til r√• ADC visning
DISPlay:MODE ESR          // Skift til ESR visning (standard)
SYSTem:COMMunication ON   // Aktiver SCPI-tilstand
SYSTem:COMMunication OFF  // Deaktiver SCPI-tilstand
*TST?                     // K√∏r selvtest (0=PASS, 1=FAIL)
SYSTem:VERSION?           // Vis firmware og hardware version
SYSTem:HELP               // Vis alle tilg√¶ngelige kommandoer
--------------------------------------------------------------------------------
4.4.3 Automatiserede m√•linger (datasamling)
// Eksempel Python script til datalogging
import serial
import time

ser = serial.Serial('COM3', 115200, timeout=1)
ser.write(b"SYSTem:COMMunication ON\n")
time.sleep(0.1)

for i in range(100):
    ser.write(b"MEASure:ESR?\n")
    response = ser.readline().decode().strip()
    print(f"{time.time()},{response}")
    time.sleep(0.1)
--------------------------------------------------------------------------------
4.5 Kalibreringsprocedure
VIGTIGT: Nuv√¶rende firmware version kr√¶ver genprogrammering for at gemme kalib-
reringsdata.
4.5.1 Forberedelse
‚Ä¢ 30 pr√¶cise referencemodstande i omr√•det 0-10 Œ© med dokumenteret n√∏jagtighed
‚Ä¢ Multimeter til verifikation
‚Ä¢ Stabil arbejdstemperatur (20-25¬∞C)
--------------------------------------------------------------------------------
4.5.2 Kalibreringstrin
‚Ä¢ Start kalibrering via SCPI: CALibrate
‚Ä¢ F√∏lg instruktioner p√• LCD-display
‚Ä¢ For hver referencemodstand:
  - Tilslut til kelvin-sockets
  - Not√©r ADC-v√¶rdi vist i RAW_ADC tilstand
  - Registr√©r par (ADC_v√¶rdi, Reference_ESR)
‚Ä¢ Efter dataindsamling:
  - Rediger ESR-tabeller i firmwarekoden
  - Genprogrammer ESP32 med opdaterede tabeller
  - Verific√©r med referencemodstande
--------------------------------------------------------------------------------
4.5.3 N√∏dkalibrering (kun til test)
‚Ä¢ I n√∏dstilf√¶lde kan emergency_calibration() bruges
‚Ä¢ Genererer teoretiske tabelv√¶rdier (ikke pr√¶cise)
‚Ä¢ Kun til systemvalidering - ikke til pr√¶cisionsm√•ling
--------------------------------------------------------------------------------

¬ß5. Vedligeholdelse og fejlfinding
================================================================================
5.1 Regelm√¶ssigt vedligehold
Dagligt (professionel brug):
‚Ä¢ Visuel inspektion af probeforbindelser
‚Ä¢ Test med kendt referencemodstand (f.eks. 1 Œ©)
‚Ä¢ Rens probetips med isopropylalkohol

M√•nedligt:
‚Ä¢ Fuldt systemtest med 3-5 referencemodstande
‚Ä¢ Kontroller fysiske probekabler for slid
‚Ä¢ Opdater fejllog hvis fejl er registreret

Hver 6. m√•ned:
‚Ä¢ Kalibrering med referencemodstande (hvis i brug)
‚Ä¢ Kontroller interne forbindelser
‚Ä¢ Verific√©r testsignal amplitude (skal v√¶re ‚â§0,1V p-p)
--------------------------------------------------------------------------------
5.2 Fejlfindingstabel
Symptom                Mulig √•rsag                  L√∏sning
---------------------- --------------------------- --------------------------------------------
Ingen LCD-visning      Ingen str√∏m                 Tjek USB-forbindelse, tryk reset
"ADC Error" p√• display ADS1115 kommunikationsfejl  Tjek I2C forbindelser, genstart
Ustabile m√•linger      D√•rlig probeforbindelse     Rens probetips, sikre god kontakt
"Watchdog Reset"       Software fejl               Genstart system, kontakt support
For h√∏je/lave v√¶rdier  Ukalibreret                 Udf√∏r kalibrering
Ingen SCPI respons     Forkert kommunikationstilstand Tryk knap 2 for SCPI tilstand
DDS-generator fejl     AD9850 initialiseringsfejl  Genstart, tjek level shifter
--------------------------------------------------------------------------------
5.3 Fejlkoder (seriel log)
Fejlmeddelelser p√• seriel port f√∏lger formatet:
ERROR [0x01]: ADS1115 init fejlet
ERROR [0x10]: Ukendt state
Almindelige fejlkoder:
0x01: ADS1115 ADC initialiseringsfejl
0x02: AD9850 DDS initialiseringsfejl
0x03: I2C kommunikationsfejl
0x10: State machine fejl
0x20: Hukommelsesfejl
--------------------------------------------------------------------------------
5.4 Systemreset og genstart
‚Ä¢ Bl√∏d reset: Tryk begge knapper i 3 sekunder
‚Ä¢ H√•rd reset: Fjern og geninds√¶t USB-str√∏m
‚Ä¢ Fabriksnulstilling: Send SCPI kommando SYSTem:PRESet
--------------------------------------------------------------------------------

¬ß6. Tekniske specifikationer
================================================================================
6.1 M√•letekniske specifikationer
Parameter          Specifikation               Kommentar
------------------ --------------------------- ---------------------------------
M√•leomr√•de         0 - 10 Œ©                    Elektrolytkondensator ESR
Opl√∏sning          1 mŒ©                        Effektiv ved 10 Œ© fuld skala
N√∏jagtighed        ‚â§5%                         Efter kalibrering, 15-25¬∞C
Testfrekvens       100 kHz                     Sinus, 0¬∞ fase
Testsignal         ‚â§0,1V p-p                   Sikker for in-circuit brug
M√•leteknik         4-leder Kelvin              Eliminerer ledningsmodstand
M√•letid            ‚â§100 ms                     Inklusive 64√ó oversampling
Temperaturomr√•de   15-25¬∞C                     Ingen kompensation
--------------------------------------------------------------------------------
6.2 Str√∏m og fysiske specifikationer
Parameter               V√¶rdi
---------------------- ----------
Input sp√¶nding         5V DC via USB-C
Str√∏mforbrug           280 mA typisk
Operativ temperatur    15-25¬∞C
Lagringstemperatur     -10¬∞C til +60¬∞C
Dimensioner (B√óH√óD)   100√ó150√ó50 mm
V√¶gt                   ~250 g (uden prober)
PCB-lag                2-lags FR-4, 1,6 mm
Display                16√ó2 karakter LCD med I2C
--------------------------------------------------------------------------------
6.3 SCPI-kommando reference
Identifikation:
*IDN? ‚Üí Returnerer: ESR-METER,SRS-ESR-MIL-001,SN001,1.00

M√•ling:
MEASure:ESR? ‚Üí Returnerer ESR i ohm (f.eks. 1.234m)

Systemkontrol:
SYSTem:PRESet ‚Üí Nulstil alle indstillinger
SYSTem:COMMunication ON/OFF ‚Üí Aktiver/deaktiver SCPI
SYSTem:VERSION? ‚Üí Returnerer versionsinfo

Displaykontrol:
DISPlay:MODE RAW ‚Üí R√• ADC visning
DISPlay:MODE ESR ‚Üí ESR resultat visning

Test og vedligeholdelse:
*TST? ‚Üí Selvtest (0=PASS, 1=FAIL)
SYSTem:HELP ‚Üí Vis kommandooversigt
CALibrate ‚Üí Start kalibreringsrutine
--------------------------------------------------------------------------------

¬ß7. Anvendelsesscenarier
================================================================================
7.1 Hobbybrug (U.HOB.001)
Typisk brug: Reparation af forst√¶rkere, str√∏mforsyninger
Anbefalede indstillinger: Normal mode, auto-PGA
Tips: Brug RAW_ADC tilstand til at l√¶re om signalniveauer
--------------------------------------------------------------------------------
7.2 Servicev√¶rksted (U.SER.001)
Typisk brug: Hurtig diagnostik, kunderapporter
Anbefalede indstillinger: SCPI mode til automatisering
Tips: Opret standard testprocedurer med kendte referencev√¶rdier
--------------------------------------------------------------------------------
7.3 Undervisning (U.EDU.001, U.ENG.001)
Typisk brug: Laboratorie√∏velser, komponentkarakterisering
Anbefalede indstillinger: Vis b√•de r√• data og beregnede v√¶rdier
Tips: Dokumenter m√•leusikkerhed og kalibreringsproces
--------------------------------------------------------------------------------
7.4 Forskning og udvikling (U.RND.001)
Typisk brug: Komponenttest, levetidsstudier
Anbefalede indstillinger: SCPI med h√∏j pr√¶cision
Tips: Brug temperaturkompensation for avancerede m√•linger
--------------------------------------------------------------------------------

¬ß8. Sikkerhedsanvisninger
================================================================================
8.1 Vigtige advarsler
‚ö†Ô∏è FARE FOR ELEKTRISK ST√òD
‚Ä¢ Test ALDRIG levende kredsl√∏be
‚Ä¢ Sluk ALTID str√∏mmen f√∏r m√•ling
‚Ä¢ Aflad kondensatorer fuldst√¶ndigt

‚ö†Ô∏è IN-CIRCUIT M√ÖLINGSBEGR√ÜNSNINGER
‚Ä¢ Testsignal er begr√¶nset til 0,1V p-p
‚Ä¢ Parallelle komponenter kan forvr√¶nge m√•linger
‚Ä¢ M√•linger p√• printplader med aktiv kredsl√∏b er FORBUDT

‚ö†Ô∏è ESD-BESKYTTELSE
‚Ä¢ Opbevar instrumentet i ESD-sikker pose
‚Ä¢ Undg√• statiske milj√∏er under brug
‚Ä¢ Brug jordingsarmb√•nd ved kalibrering
--------------------------------------------------------------------------------
8.2 Bortskaffelse og milj√∏
‚Ä¢ WEEE kategori 3: IT- og telekommunikationsudstyr
‚Ä¢ RoHS kompatibel: Ingen farlige stoffer
‚Ä¢ Genbrug: F√∏lg lokal affaldsh√•ndteringslovgivning
‚Ä¢ Demontage: Se hardwarekonstruktionsrapport for komponentseparation
--------------------------------------------------------------------------------
8.3 Garanti og support
‚Ä¢ Standardgaranti: 12 m√•neder p√• materiale- og fabrikationsfejl
‚Ä¢ Support: Teknisk support via dokumentationspakken
‚Ä¢ Kalibreringsinterval: Anbefalet 12 m√•neder eller efter temperaturudsving >10¬∞C
--------------------------------------------------------------------------------

¬ß9. Referencer og yderligere information
================================================================================
9.1 Relaterede dokumenter
‚Ä¢ SRS-ESR-MIL-001: Kravspecifikation (fuld kravliste)
‚Ä¢ HWKONS-ESR-MIL-001: Hardwarekonstruktionsrapport (netliste, PCB)
‚Ä¢ SW-ESR-MIL-002: Firmware dokumentation (kildekode)
--------------------------------------------------------------------------------
9.2 Tekniske referencer
‚Ä¢ Horowitz & Hill: "The Art of Electronics" (operationsforst√¶rker-design)
‚Ä¢ Williams: "Analog Circuit Design" (pr√¶cisionsm√•leteknik)
‚Ä¢ IPC-A-610: Acceptkriterier for elektroniksamlinger
--------------------------------------------------------------------------------
9.3 Kontakt og support
‚Ä¢ Dokumentationsfejl: Se GitHub repository for opdateringer
‚Ä¢ Tekniske sp√∏rgsm√•l: Konsulter hardware- og firmware-dokumentation
‚Ä¢ Kalibreringssp√∏rgsm√•l: Referer til ¬ß4.5 i denne vejledning
--------------------------------------------------------------------------------

¬ß10. √Ündringshistorik
================================================================================
Version     Dato         Beskrivelse                             Forfatter
---------- ------------ --------------------------------------- -----------------
1.00       19-01-25     F√∏rste udgave - komplet brugervejledning Jan Engelbrecht
                                                                 Pedersen
--------------------------------------------------------------------------------

Ophavsret (c) 2026 Jan Engelbrecht Pedersen

Denne brugervejledning leveres "som den er" uden nogen form for garanti. Brugeren
er selv ansvarlig for korrekt anvendelse af instrumentet if√∏lge g√¶ldende sikker-
hedsstandarder.
================================================================================